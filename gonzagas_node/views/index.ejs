<%- contentFor('content') %>
<main>
    <!-- Hero Section with Video Background -->
    <section class="hero">
      <div class="video-background">
        <% const videoFile = mediaFiles.find(file => file.type === 'video'); %>
        <% if (videoFile) { %>
          <video autoplay muted loop playsinline>
            <source src="<%= videoFile.path %>" type="video/mp4">
          </video>
        <% } %>
      </div>
      <div class="hero-content">
        <h1><%= siteTitle %></h1>
        <p><%= siteDescription %></p>
      </div>
    </section>
    
    <!-- Featured Products -->
    <section class="featured-section">
      <div class="section-header">
        <h2>Featured Pieces</h2>
        <div class="geometric-divider">
          <span></span>
          <span></span>
          <span></span>
        </div>
      </div>
      <div class="product-grid">
        <% featured.slice(0, 4).forEach(product => { %>
          <div class="product-card">
            <div class="product-image">
              <img src="/media/<%= product.image_filename %>" alt="<%= product.name %>" loading="lazy">
              <div class="product-overlay">
                <a href="/product/<%= product.id %>" class="btn">View Details</a>
              </div>
            </div>
            <div class="product-info">
              <h3><%= product.name %></h3>
              <p class="product-category"><%= product.category %></p>
              <p class="price">
                <% if (product.sale_price) { %>
                  <span class="sale-price">$<%= Number(product.sale_price).toFixed(2) %></span>
                  <span class="original-price">$<%= Number(product.price).toFixed(2) %></span>
                <% } else { %>
                  $<%= Number(product.price).toFixed(2) %>
                <% } %>
              </p>
            </div>
          </div>
        <% }); %>
      </div>
    </section>
    
    <!-- All Collections -->
    <section class="all-collections">
      <div class="section-header">
        <h2>Explore Our Collections</h2>
        <div class="geometric-divider">
          <span></span>
          <span></span>
          <span></span>
        </div>
      </div>
      <div class="collections-grid">
        <% families.forEach(family => { %>
          <a href="/collection/<%= family.id %>" class="collection-card">
            <div class="collection-image">
              <img src="/media/<%= family.image_filename || 'default-collection.jpg' %>" alt="<%= family.name %>" loading="lazy">
            </div>
            <div class="collection-info">
              <h3><%= family.name %></h3>
              <p><%= family.description %></p>
            </div>
          </a>
        <% }); %>
      </div>
    </section>
</main>
<% }); %>